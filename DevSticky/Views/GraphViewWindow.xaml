<Window x:Class="DevSticky.Views.GraphViewWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:DevSticky.Services"
        Title="{loc:Localize GraphViewTitle}"
        Width="800" Height="600"
        MinWidth="400" MinHeight="300"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResizeWithGrip">
    
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/SharedStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    
    <Border Background="{DynamicResource BaseBrush}" CornerRadius="8" 
            BorderBrush="{DynamicResource Surface1Brush}" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Custom Title Bar -->
            <Border Grid.Row="0" Background="{DynamicResource Surface0Brush}" 
                    CornerRadius="8,8,0,0" MouseLeftButtonDown="Header_MouseLeftButtonDown">
                <Grid Margin="12,0">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="ðŸ”— " Foreground="{DynamicResource TextBrush}" FontSize="14"/>
                        <TextBlock Text="{loc:Localize GraphViewTitle}" Foreground="{DynamicResource TextBrush}" 
                                   FontSize="14" FontWeight="SemiBold"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <Button Content="â”€" Style="{StaticResource IconBtn}" Click="BtnMinimize_Click" ToolTip="{loc:Localize Minimize}"/>
                        <Button x:Name="BtnMaximize" Content="â˜" Style="{StaticResource IconBtn}" Click="BtnMaximize_Click" ToolTip="{loc:Localize Maximize}"/>
                        <Button Content="âœ•" Style="{StaticResource IconBtn}" Click="BtnClose_Click" ToolTip="{loc:Localize Close}"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Toolbar -->
            <Border Grid.Row="1" 
                    Background="{DynamicResource Surface0Brush}" 
                    Padding="8">
                <StackPanel Orientation="Horizontal">
                    <Button Content="âž•" Style="{StaticResource IconBtn}" Width="32" Height="32"
                            Click="BtnZoomIn_Click" ToolTip="{loc:Localize ZoomIn}"/>
                    <Button Content="âž–" Style="{StaticResource IconBtn}" Width="32" Height="32"
                            Click="BtnZoomOut_Click" ToolTip="{loc:Localize ZoomOut}"/>
                    <Button Content="âŸ²" Style="{StaticResource IconBtn}" Width="32" Height="32"
                            Click="BtnResetView_Click" ToolTip="{loc:Localize ResetView}"/>
                    <Separator Margin="8,4" Background="{DynamicResource Surface2Brush}"/>
                    <Button Content="ðŸ”„" Style="{StaticResource IconBtn}" Width="32" Height="32"
                            Click="BtnRefresh_Click" ToolTip="{loc:Localize RefreshGraph}"/>
                </StackPanel>
            </Border>
            
            <!-- Graph Canvas with Zoom/Pan -->
            <Border Grid.Row="2" 
                    ClipToBounds="True"
                    Background="{DynamicResource MantleBrush}">
                <Canvas x:Name="GraphCanvas"
                        MouseLeftButtonDown="GraphCanvas_MouseLeftButtonDown"
                        MouseLeftButtonUp="GraphCanvas_MouseLeftButtonUp"
                        MouseMove="GraphCanvas_MouseMove"
                        MouseWheel="GraphCanvas_MouseWheel">
                    <Canvas.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform x:Name="ScaleTransform" ScaleX="1" ScaleY="1"/>
                            <TranslateTransform x:Name="TranslateTransform"/>
                        </TransformGroup>
                    </Canvas.RenderTransform>
                </Canvas>
            </Border>
            
            <!-- Status Bar -->
            <Border Grid.Row="3" 
                    Background="{DynamicResource Surface0Brush}" 
                    CornerRadius="0,0,8,8"
                    Padding="8,4">
                <StackPanel Orientation="Horizontal">
                    <TextBlock x:Name="StatusText"
                               Text="{loc:Localize LoadingGraph}"
                               Foreground="{DynamicResource SubtextBrush}"
                               FontSize="12"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
